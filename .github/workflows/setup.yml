name: Setup initial kit name

on:
  workflow_dispatch:
    inputs:
      new_kit_name:
        description: "Set new name for kit. (my-awesome-kit)"
        required: true
  
jobs:
  rename:
    runs-on: ubuntu-latest
    # Only run on new repositories, not the template
    if: github.repository != 'Pixel-Fondue/modo-kit-basic'
    steps:
      - name: Chekout
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Rename Kit
        run: |
          mv my-modo-kit ${{ github.event.inputs.new_kit_name }}
      
      - name: Apply new name
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add -A
          git commit -m "Rename Modo kit" -a
          git push
